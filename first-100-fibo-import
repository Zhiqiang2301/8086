ORG 100H
.DATA
MSG DB "NHAP N: $"
X DW ? ; NHAP X
Y DW ? ; XUAT Y ( KET QUA)
A DW 0 ; A = 0
B DW 1 ; B = 1
.CODE
 MAIN PROC
 MOV AX, @DATA ; NHAP
 MOV DS, AX
 MOV AH, 9
 LEA DX, MSG
 INT 21H
 CALL NHAPSO

 CALL FIBO

 MOV AH, 4CH
 INT 21H

 MAIN ENDP 
 
 NHAPSO PROC
 MOV X,0
 MOV Y,0
 MOV BX,10
 NHAP:
 MOV AH,1
 INT 21H
 CMP AL,13
 JE THOAT
 SUB AL,30H ;CHAR TO INT
 XOR AH,AH
 MOV Y,AX
 MOV AX,X
 MUL BX
 ADD AX,Y
 MOV X,AX
 JMP NHAP
 THOAT:
 RET
 NHAPSO ENDP

 HTHI PROC ; HIEN THI LAN LUOT CAC TONG CHU SO TRONG FIBO
 MOV BX,10
 MOV AX,Y
 MOV CX,0
 CHIA:
 MOV DX,0
 DIV BX
 INC CX ;TANG CX 1
 PUSH DX
 CMP AL,0
 JE HT
 JMP CHIA
 HT:
 POP DX
 ADD DL,30H
 MOV AH,2
 INT 21H
 DEC CX ;GIAM CX 1
 CMP CX,0
 JNE HT
 MOV CX, X
 ADD CX, 1
 RET
 HTHI ENDP

 FIBO PROC
 FB:
 MOV AX, X
 SUB AX, 1
 MOV X, AX
 MOV AX, A
 MOV BX, B
 ADD AX, BX
 MOV Y, AX
 MOV B, AX
 MOV A, BX

 MOV DL,13 ; XUONG HANG
 MOV AH,2
 INT 21H
 MOV DL,10
 MOV AH,2
 INT 21H

 CALL HTHI

 LOOP FB
 FIBO ENDP
